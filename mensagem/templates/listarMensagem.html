{% extends 'model-page.html' %}
{% block content %}

<main class="app-content">
    <div class="row user">
        <div class="col-md-6">
            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Minhas Mensagems</font></font></h3>
                </div>
                <!-- /.box-header -->
                <div class="box-body">
                    <ul class="products-list product-list-in-box">
                        {% for mensagem in mensagens %}
                        <li class="item">
                            {% if mensagem.remetente.id == request.user.id %}
                            <a href="{% url 'detalheMensagem' idRemetente=request.user.id idDestinatario=mensagem.destinatario.id %}"
                               class="product-title">
                                <div class="product-img">
                                    <img src="https://image.freepik.com/vetores-gratis/icone-de-perfil-de-pessoas_24877-40758.jpg" alt="Imagem do Produto">
                                </div>
                                <div class="product-info">
                                    <p class="text-black-50"> {{mensagem.remetente.first_name}}</p>
                                    <font>
                                        <span class="label label-warning pull-right"><font
                                                style="vertical-align: inherit;"><font
                                                style="vertical-align: inherit;">Data</font>
                                        </font>
                                        </span>
                                    </font>
                                    <span class="product-description">
                                        <font style="vertical-align: inherit;">
                                            <font
                                                    style="vertical-align: inherit;">
                                                    {{mensagem.texto}}
                                            </font>
                                        </font>
                                    </span>
                                </div>
                            </a>
                            {% else %}
                            <a href="{% url 'detalheMensagem' idRemetente=request.user.id idDestinatario=mensagem.remetente.id %}"
                               class="product-title">
                                <div class="product-img">
                                    <img src="https://image.freepik.com/vetores-gratis/icone-de-perfil-de-pessoas_24877-40758.jpg" alt="Imagem do Produto">
                                </div>
                                <div class="product-info">
                                    <p class="text-black-50"> {{mensagem.remetente.first_name}}</p>
                                    <font>
                                        <span class="label label-warning pull-right"><font
                                                style="vertical-align: inherit;"><font
                                                style="vertical-align: inherit;">Data</font>
                                        </font>
                                        </span>
                                    </font>
                                    <span class="product-description">
                                        <font style="vertical-align: inherit;">
                                            <font
                                                    style="vertical-align: inherit;">
                                                    {{mensagem.texto}}
                                            </font>
                                        </font>
                                    </span>
                                </div>
                            </a>
                            {% endif %}
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="box box-warning direct-chat direct-chat-warning">
                <div class="box-header with-border">
                    <h3 class="box-title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bate-papo
                        direto</font></font></h3>
                </div>
                <!-- /.box-header -->
                <div class="box-body">
                    <!-- Conversations are loaded here -->
                    <div class="direct-chat-messages">
                        {% for mensagem in mensagens_detalhe %}

                        {% if mensagem.destinatario.id == destinatario.id %}
                            <div class="direct-chat-msg">
                            <div class="direct-chat-info clearfix">
                                <span class="direct-chat-name pull-left"><font style="vertical-align: inherit;"><font
                                        style="vertical-align: inherit;">{{remetente.first_name}}</font></font></span>
                                <span class="direct-chat-timestamp pull-right"><font
                                        style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remetente, 14h00</font></font></span>
                            </div>
                            <!-- /.direct-chat-info -->
                            <img class="direct-chat-img" src="https://cdn.iconscout.com/icon/free/png-512/laptop-user-1-1179329.png"
                                 alt="imagem do usuário da mensagem">
                            <!-- /.direct-chat-img -->
                            <div class="direct-chat-text"><font style="vertical-align: inherit;">
                                <font style="vertical-align: inherit;">
                                    {{mensagem.texto}}
                                </font></font></div>
                            <!-- /.direct-chat-text -->
                        </div>
                        {% else %}
                            <div class="direct-chat-msg right">


                            <div class="direct-chat-info clearfix">
                                <span class="direct-chat-name pull-right"><font style="vertical-align: inherit;"><font
                                        style="vertical-align: inherit;">{{mensagem.remetente.first_name}}</font></font></span>
                                <span class="direct-chat-timestamp pull-left"><font
                                        style="vertical-align: inherit;"><font style="vertical-align: inherit;">23 de janeiro 14h05</font></font></span>
                            </div>
                            <!-- /.direct-chat-info -->
                            <img class="direct-chat-img" src="https://image.freepik.com/vetores-gratis/icone-de-perfil-de-pessoas_24877-40758.jpg"
                                 alt="imagem do usuário da mensagem">
                            <!-- /.direct-chat-img -->
                            <div class="direct-chat-text"><font style="vertical-align: inherit;"><font
                                    style="vertical-align: inherit;">
                                {{mensagem.texto}}
                            </font></font></div>
                            <!-- /.direct-chat-text -->
                        </div>
                        {% endif %}
                        {% endfor %}
                    </div>
                </div>

                <!-- /.box-body -->
                <div class="box-footer">
                    {% if destinatario %}
                    <form action="{% url 'responderMensagem' idRemetente=remetente.id idDestinatario=destinatario.id %}" method="post">
                        {%csrf_token %}
                        <input type="hidden" name="remetente" id="remetente" value={{remetente.id}}>
                        <input type="hidden" name="destinatario" id="destinatario"
                                           value={{destinatario.id}}>
                        <div class="input-group">
                            <input type="text" name="texto" placeholder="Digite a mensagem ..." class="form-control">
                            <span class="input-group-btn">
                            <button type="submit" class="btn btn-primary block" id="demoNotify1"><font
                                    style="vertical-align: inherit;"><font
                                    style="vertical-align: inherit;">Responder</font></font></button>
                          </span>
                        </div>
                    </form>
                    {% endif %}
                </div>
                <!-- /.box-footer-->
            </div>
        </div>
    </div>
</main>
{% endblock %}
